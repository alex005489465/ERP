# 資料庫檔案

此資料夾存放 ERP 系統的資料庫相關檔案。包含資料庫的結構定義 (Schema)、初始化資料 (Seed) 以及版本更新時需要執行的 SQL 腳本。

這些腳本對於維護資料庫的一致性與完整性至關重要。

## 資料庫設計原則

### 表結構設計
- 所有主鍵統一使用 BIGINT 自增型別
- 所有欄位允許 NULL，資料完整性在應用層控制
- 不使用外鍵約束，避免資料庫層級的強制關聯
- 時間欄位使用 DATETIME(3) 提供毫秒級精度
- 類似枚舉的欄位都使用 TINYINT 並在註釋中明確定義狀態值含義

### 命名規範
- 表名使用複數形式的英文單詞（如 users, items）
- 欄位名使用小寫英文與底線組合（如 created_at, item_id）
- 索引名使用 idx_ 前綴加上表名與相關欄位名（如 idx_users_status, idx_stocks_item_id）
- 與其他表的關聯欄位以 _id 結尾（如 warehouse_id）

### 版本控制
- 每個版本更新使用獨立的 SQL 檔案
- 使用存儲過程包裝更新邏輯，確保原子性操作
- 版本檢查機制防止重複執行或跳版本更新
- 所有結構變更需要明確的註釋說明

### 索引策略
- 為經常查詢的欄位建立適當索引
- 狀態類欄位建立索引以支援過濾查詢
<!-- - 時間欄位建立索引以支援範圍查詢 -->
- 複合索引優先考慮查詢頻率高的欄位組合
