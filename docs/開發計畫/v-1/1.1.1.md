## ç›®æ¨™
- æ¶å¥½é–‹ç™¼ç’°å¢ƒ

## æ­¥é©Ÿ
- å…ˆå¯«å€‹docker-compose
  - mysql
  - phpadmin
- æ±ºå®šç’°å¢ƒã€å¥—ä»¶ã€ç‰ˆæœ¬
- ä¿®æ”¹pomä¾è³´ã€mavenè¨­å®š
- å¼„ä¸€äº›å…¬å…±é¡ï¼Œusecase

## æ¦‚è¦
- å¾Œç«¯:java
  - æœ¬æ©Ÿé–‹ç™¼
- DBç”¨docker
  - mysql
    - mysql:8.4.5 (æœ€æ–°LTS)
      - Oracle æä¾›çš„ é•·æœŸæ”¯æ´ç‰ˆæœ¬ï¼Œæ”¯æ´åˆ° 2032 å¹´
      - ç¶“æ­·å¤šæ¬¡ä¿®å¾©ï¼Œå·²è¢« AWS RDS æ¨è–¦èˆ‡å»£æ³›é©—è­‰
  - phpadmin
    - phpmyadmin/phpmyadmin:5.2.2	
- redisè·Ÿæ¶ˆæ¯éšŠåˆ—å…ˆä¸è€ƒæ…®
- ä¸»å¾ã€binlogï¼Œä¹‹å¾Œå†èªª
- å…ˆå»ºå€‹è¡¨ï¼Œkey_values
- å»ºç«‹ä¸€å€‹å°ˆæ¡ˆï¼Œcore
- å…ˆå¯« UseCaseï¼Œå†æŠ½ Service
  - UseCase æ˜¯æ¥­å‹™çš„å…¥å£é»ï¼šä»£è¡¨ã€Œä½¿ç”¨è€…çš„æ„åœ–ã€ï¼ˆå¦‚å»ºç«‹è¨‚å–®ã€å–æ¶ˆäº¤æ˜“ï¼‰ï¼Œé€™äº›æµç¨‹é€šå¸¸æ¯”è¼ƒå®¹æ˜“å…ˆå®šä¸‹ä¾†ã€‚
  - Service æŠ½å‡ºæ˜¯ refactorï¼Œä¸æ˜¯é è¨­ï¼šç•¶ä½ ç™¼ç¾é‚è¼¯å‡ºç¾é‡è¤‡æ™‚ï¼Œå†å°‡é‚£æ®µé‚è¼¯æŠ½æˆ Serviceï¼Œé€™æ¨£æ›´ç¬¦åˆå¯¦éš›ä½¿ç”¨æƒ…å¢ƒï¼Œä¹Ÿèƒ½é¿å…ã€Œéåº¦è¨­è¨ˆã€
- åƒæ•¸é©—è­‰ è²¬ä»»åˆ†å±¤
  ```markdown
  | é©—è­‰å…§å®¹            | å»ºè­°ä½ç½®                           | èªªæ˜                                                               |
  | --------------- | ------------------------------ | ---------------------------------------------------------------- |
  | æ ¼å¼ã€æ¬„ä½ã€ç¯„åœé©—è­‰      | **Controller å±¤**               | ä½¿ç”¨å¦‚ `@Valid`ã€`@NotNull`ã€`@Size` ç­‰é€²è¡ŒåŸºç¤åƒæ•¸é©—è­‰ã€‚é€šå¸¸æ˜¯å° `RequestDTO` çš„é©—è­‰ã€‚ |
  | æ¥­å‹™é‚è¼¯ç›¸é—œï¼ˆå¦‚å¸³è™Ÿæ˜¯å¦å­˜åœ¨ï¼‰ | **UseCase å±¤**                  | åŸ·è¡Œå‰æœƒæª¢æŸ¥è³‡æ–™ç‹€æ…‹æ˜¯å¦åˆæ³•ï¼Œå¦‚ã€Œemail æ˜¯å¦å·²è¨»å†Šã€ç­‰ã€‚é€™å±¬æ–¼ *é‚è¼¯å±¤é©—è­‰*ã€‚                      |
  | è¤‡é›œè·¨è¡¨æˆ–äº‹å‹™æ¢ä»¶       | **UseCase æˆ– Domain Service å±¤** | ä¾‹å¦‚ã€Œå•†å“å­˜åœ¨ä¸”åº«å­˜å¤§æ–¼ 0 ä¸”ä½¿ç”¨è€…ç‚º VIPã€é€™é¡è¦å‰‡ã€‚                                   |
  ```
  ```markdown
  ### èª°è©²é©—è­‰ä»€éº¼ï¼Ÿ
  - Controller â†’ ä¿è­‰ã€Œè³‡æ–™æ ¼å¼æ­£ç¢ºã€
  - UseCase â†’ ä¿è­‰ã€Œæ¥­å‹™é‚è¼¯æ­£ç¢ºã€
  - Domain/Entityï¼ˆè‹¥ç”¨ DDDï¼‰ â†’ ä¿è­‰ã€Œä¸å¯é•åé ˜åŸŸè¦å‰‡ã€
  ```
- 
## å‹•ä½œ
### ç‰ˆæœ¬
- æ±ºå®šç‰ˆæœ¬
  - Java 21.0.7
  - Spring Boot 3.5.3
  - Maven 3.9.11
  - ç´” API å¾Œç«¯ï¼Œåªç”¨ POST
- å¥—ä»¶
  - spring-boot-starter-web	3.5.3	
  - spring-boot-starter-data-jpa	3.5.3	
  - com.mysql:mysql-connector-j 8.4.0	
  - spring-boot-starter-validation	3.5.3	
  - spring-boot-starter-test	3.5.3	
- å¥—ä»¶
  - Lombok 1.18.32
  - MapStruct 1.6.3
  - Lombok-MapStruct-Binding	0.2.0	
  - SpringDoc OpenAPI 2.8.9

### ğŸ§© æ¨¡çµ„è·è²¬å°ç…§ï¼ˆç°¡åŒ–è¡¨ï¼‰
| æ¨¡çµ„                  | è² è²¬å…§å®¹                                       |
| ------------------- | ------------------------------------------ |
| `bootstrap`         | å•Ÿå‹•ã€çµ„è£ Beanï¼Œè¼‰å…¥ Spring Boot ä¸»ç¨‹å¼              |
| `api`               | Controller + DTO å°å¤– APIï¼Œå« REST è«‹æ±‚/å›æ‡‰å°è£     |
| `domain`            | ç´” Java å¯¦é«”ã€Enumã€ä»‹é¢ã€VOï¼Œä¸ä¾è³´ Spring            |
| `service`           | ç´” Java é‚è¼¯å¯¦ä½œï¼Œå¯¦ç¾ domain å±¤çš„ service interface |
| `database`          | JPA entityã€repositoryã€è³‡æ–™åº«ç›¸é—œé‚è¼¯              |
| `library`           | å…¬å…±å›å‚³çµæ§‹ã€ä¾‹å¤–è™•ç†ã€å·¥å…·é¡åˆ¥                           |

### å°ˆæ¡ˆç›®éŒ„çµæ§‹
```pgsql
core/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/
    â”œâ”€â”€ main/
    â”‚   â”œâ”€â”€ java/
    â”‚   â”‚   â””â”€â”€ core/
    â”‚   â”‚       â”œâ”€â”€ bootstrap/
    â”‚   â”‚       â”‚   â””â”€â”€ CoreApplication.java
    â”‚   â”‚       â”œâ”€â”€ api/
    â”‚   â”‚       â”‚   â”œâ”€â”€ controller/
    â”‚   â”‚       â”‚   â””â”€â”€ dto/
    â”‚   â”‚       â”œâ”€â”€ domain/
    â”‚   â”‚       â”‚   â”œâ”€â”€ model/
    â”‚   â”‚       â”‚   â”œâ”€â”€ enums/
    â”‚   â”‚       â”‚   â””â”€â”€ service/        # interface
    â”‚   â”‚       â”œâ”€â”€ service/
    â”‚   â”‚       â”‚   â””â”€â”€ impl/
    â”‚   â”‚       â”œâ”€â”€ database/
    â”‚   â”‚       â”‚   â”œâ”€â”€ entity/
    â”‚   â”‚       â”‚   â”œâ”€â”€ repository/
    â”‚   â”‚       â”‚   â””â”€â”€ mapper/
    â”‚   â”‚       â””â”€â”€ library/
    â”‚   â”‚           â”œâ”€â”€ exception/
    â”‚   â”‚           â”œâ”€â”€ base/
    â”‚   â”‚           â””â”€â”€ util/
    â”‚   â””â”€â”€ resources/
    â”‚       â””â”€â”€ application.yml
    â””â”€â”€ test/
        â””â”€â”€ java/
            â””â”€â”€ core/
                â”œâ”€â”€ bootstrap/
                    â””â”€â”€ CoreApplicationTests.java
```
### å…¶ä»–
- @SpringBootApplication è¨­å®šäº† scanBasePackages = "core"ï¼Œç¢ºä¿æƒæä½ æ‰€æœ‰å­ package
- ä½ æ‰€æœ‰çš„æ¥­å‹™ç¨‹å¼ç¢¼éƒ½æ”¾åœ¨ core æ ¹ package ä¸‹çš„å­ç›®éŒ„è£¡ï¼ˆapi, domain, service, database ç­‰ï¼‰
- library ç›®éŒ„å¯æ”¾å·¥å…·é¡ã€å…±ç”¨éŒ¯èª¤èˆ‡å›å‚³çµæ§‹
- æ¸¬è©¦é¡åˆ¥æ”¾åœ¨ src/test/java/core/ ä¸‹
- encodingç‚ºUTF-8
### base
#### æ–‡ä»¶çµæ§‹
```plaintext
core.src.main.java.core.library
â”œâ”€â”€ base/
â”‚   â”œâ”€â”€ BaseEntity.java
â”‚   â”œâ”€â”€ BaseModel.java
â”‚   â”œâ”€â”€ BaseController.java
â”‚   â””â”€â”€ BaseUseCase.java
â””â”€â”€ contract/
    â”œâ”€â”€ entity/
    â”‚   â””â”€â”€ IEntity.java  èˆ‡è³‡æ–™åº«ç›¸é—œçš„
    â”œâ”€â”€ model/
    â”‚   â””â”€â”€ IModel.java   ç´”é ˜åŸŸæ¨¡å‹
    â”œâ”€â”€ controller/
    â”‚   â”œâ”€â”€ IController.java
    â”‚   â””â”€â”€ IApiResponse.java
    â””â”€â”€ usecase/
        â””â”€â”€ IUseCase.java  æ¥­å‹™åŸ·è¡Œé‚è¼¯

```
#### åŠŸèƒ½
```
| æŠ½è±¡é¡åˆ¥             | å¯¦ä½œæ¥å£          | ç”¨é€”                                        |
| ---------------- | ------------- | ----------------------------------------- |
| `BaseEntity`     | `IEntity`     | çµ±ä¸€ IDã€æ™‚é–“æ¬„ä½ç­‰æ¨™æº–æ¬„ä½èˆ‡è¡Œç‚ºã€‚                       |
| `BaseController` | `IController` | çµ±ä¸€ API å›å‚³æ ¼å¼ã€éŒ¯èª¤è™•ç†ç­‰è¡Œç‚ºå¥‘ç´„ã€‚                    |
| `BaseUseCase`    | `IUseCase`    | çµ±ä¸€ `execute(Input input): Output` æ¨™æº–åŸ·è¡Œæ¨¡å¼ã€‚ |
```
#### æ¥å£å®šç¾©
```plaintext

## ğŸ”¶ æ¥å£å®šç¾©èˆ‡èªªæ˜

### 1ï¸âƒ£ `entity/IEntity.java`

**ğŸ“Œ ç”¨é€”ï¼š**
æ‰€æœ‰è³‡æ–™å¯¦é«”é¡åˆ¥æ‡‰å¯¦ä½œæ­¤æ¥å£ã€‚

**âœ… æ‡‰åŒ…å«ï¼š**

* å”¯ä¸€è­˜åˆ¥ç¢¼ï¼ˆå¦‚ IDï¼‰
* å»ºç«‹æ™‚é–“ï¼ˆCreatedAtï¼‰
* æ›´æ–°æ™‚é–“ï¼ˆUpdatedAtï¼‰

---

### 2ï¸âƒ£ `model/IModel.java`

**ğŸ“Œ ç”¨é€”ï¼š**
å®šç¾©ç´”é ˜åŸŸæ¨¡å‹ï¼ˆéè³‡æ–™åº«æ˜ å°„å¯¦é«”ï¼‰çš„åŸºæœ¬è¡Œç‚ºã€‚ç”¨æ–¼ DDD ä¸­çš„ Value Objectã€Aggregate Root ç­‰æ¨¡å‹ã€‚

**âœ… å¯åŒ…å«ï¼š**

* `sameIdentityAs(IModel other)`ï¼šæ˜¯å¦ç‚ºç›¸åŒæ¥­å‹™é‚è¼¯å¯¦é«”
* æœªèˆ‡ ORM ç›´æ¥è€¦åˆçš„é‚è¼¯å±¬æ€§

---

### 3ï¸âƒ£ `usecase/IUseCase.java`

**ğŸ“Œ ç”¨é€”ï¼š**
æ‰€æœ‰æ‡‰ç”¨å±¤ Use Case çš„çµ±ä¸€åŸ·è¡Œå…¥å£ã€‚

**âœ… æ‡‰åŒ…å«ï¼š**

* ä¸€å€‹ `execute` æ–¹æ³•ï¼š

  * æ¥æ”¶ä¸€å€‹è¼¸å…¥åƒæ•¸
  * å›å‚³ä¸€å€‹è™•ç†çµæœï¼ˆå¯ç‚ºåŒæ­¥æˆ–ç•°æ­¥ï¼‰


---

### 4ï¸âƒ£ `controller/IController.java`

**ğŸ“Œ ç”¨é€”ï¼š**
å®šç¾©æ§åˆ¶å™¨å±¤çš„å›æ‡‰æ“ä½œèˆ‡æ¨™æº–è™•ç†æ–¹å¼ã€‚

**âœ… æ‡‰åŒ…å«ä¸‰å€‹æ–¹æ³•ï¼š**

1. **å®Œæ•´è‡ªå®šç¾©å›æ‡‰**

   * åƒæ•¸ï¼šè³‡æ–™ã€è¨Šæ¯ã€ç‹€æ…‹ç¢¼ã€HTTPç‹€æ…‹ç­‰
   * å›å‚³ï¼š`IApiResponse`

2. **æˆåŠŸå›æ‡‰**

   * æ¥æ”¶è³‡æ–™ç‰©ä»¶
   * å›å‚³æˆåŠŸå°è£çš„ `IApiResponse`

3. **å¤±æ•—å›æ‡‰**

   * æ¥æ”¶éŒ¯èª¤è¨Šæ¯ï¼ˆå¯é¸æ¥­å‹™ç‹€æ…‹ç¢¼ï¼‰
   * å›å‚³å¤±æ•—å°è£çš„ `IApiResponse`

---

### 5ï¸âƒ£ `controller/IApiResponse.java`

**ğŸ“Œ ç”¨é€”ï¼š**
å®šç¾© API å›æ‡‰ç‰©ä»¶çš„çµ±ä¸€æ ¼å¼ã€‚

**âœ… æ‡‰åŒ…å«æ¬„ä½ï¼š**

| æ¬„ä½åç¨±           | é¡å‹        | èªªæ˜                         |
| -------------- | --------- | -------------------------- |
| success        | `boolean` | å›æ‡‰æ˜¯å¦æˆåŠŸ                     |
| message        | `String`  | æç¤ºè¨Šæ¯ï¼Œæè¿°æˆåŠŸæˆ–éŒ¯èª¤åŸå›              |
| data           | `T`       | å¯¦éš›å›å‚³è³‡æ–™ï¼Œå¯ç‚ºä»»æ„å‹åˆ¥              |
| businessCode   | `int`     | è‡ªè¨‚æ¥­å‹™ä»£ç¢¼ï¼Œä¾‹å¦‚ 1001ï¼šå¸³è™Ÿä¸å­˜åœ¨       |
| httpStatusCode | `int`     | æ¨™æº– HTTP ç‹€æ…‹ç¢¼ï¼Œä¾‹å¦‚ 200ã€400ã€500 |

---

å¦‚éœ€æˆ‘å¹«ä½ ç›´æ¥ç”¢å‡ºé€™äº› `interface` çš„ Java ç¯„æœ¬æª”æ¡ˆï¼Œä¹Ÿå¯ä»¥ä¸€ä½µå¹«ä½ ç”Ÿæˆã€‚éœ€è¦å—ï¼Ÿ

```
#### 

### 123