## 目標
- 貨物的管理 : 品項、庫存、進出歷史

## 步驟
- 先建立對應的表

## 概要
### 核心
- 📦 品項（什麼貨）what
- 📊 庫存（現在在哪）where
- 🕓 進出歷史（何時動了）when
### 表
- items — 品項主檔
| 欄位名稱        | 說明           |
| ----------- | ------------ |
| id          | 商品唯一代號（SKU）  |
| name        | 商品名稱         |
| unit        | 單位（如：箱、件、kg） |
| description | 備註說明         |
| is\_active  | 是否啟用         |
- warehouses — 倉庫地點（可選）
| 欄位名稱     | 說明              |
| -------- | --------------- |
| id       | 倉庫代號（主鍵）        |
| name     | 倉庫名稱            |
| location | 倉庫地址（地理位置，城市或GPS） |
| is_active | 是否啟用（可管理多個倉庫）   |
- locations — 儲位/庫位
| 欄位名稱        | 說明                    |
| ----------- | --------------------- |
| id          | 儲位代號（主鍵，可編碼如 A1-01） |
| warehouse_id | 所屬倉庫（外鍵）             |
| zone        | 區域/區段（例如冷藏區、成品區）     |
| name        | 儲位名稱（例如：「A-01 上層」）   |
| description | 備註說明（可空）             |
| is_active   | 是否啟用                 |
- stock — 即時庫存（每個儲位一筆）
| 欄位名稱       | 說明             |
| ---------- | -------------- |
| id         | PK，自動遞增        |
| item_id    | 品項 ID（FK）      |
| location_id | 儲位 ID（FK）     |
| quantity   | 數量（允許負數表示短缺）   |
| last_updated | 最後更新時間        |
- stock_movements — 進出紀錄
| 欄位名稱            | 說明                |
| --------------- | ----------------- |
| id              | PK，自動遞增           |
| item_id         | 品項 ID（FK）         |
| location_id     | 儲位 ID（FK）        |
| type            | 類型（IN、OUT、ADJUST） |
| quantity        | 數量（+/-）           |
| reference_type  | 來源單據類型（如進貨單、銷貨單）  |
| reference_id    | 來源單據 ID           |

### 基本功能
| 模組   | 功能說明                             |
| ---- | -------------------------------- |
| 商品管理 | 建立/修改商品                          |
| 庫存查詢 | 即時查看每個倉庫/商品庫存量                   |
| 進貨入庫 | 輸入進貨單，產生 `stock_movement`        |
| 出貨出庫 | 輸入銷貨單，產生 `stock_movement`        |
| 庫存調整 | 修正庫存錯誤，調整紀錄也會寫入 `stock_movement` |
| 歷史查詢 | 商品的進出歷史追蹤、某段期間內報表                |
### 流程
```lua
+------------+      +----------------+      +---------------+
| 進貨單建立 | ---> | 進貨入庫處理  | ---> | stock 增加    |
+------------+      +----------------+      +---------------+
                         |
                         v
                +-----------------+
                | stock_movement  | <--- 出貨出庫 / 調整操作也寫入
                +-----------------+
```

## 思考
- 儲位之間調撥紀錄（location_transfers，例如移位、整理庫存），之後再說
- 可在 locations 表加上：
  - `max_capacity` - 最大容納量（體積、重量或件數上限）
  - `current_capacity` - 即時佔用量（當前已使用的容量）
  - `type` - 儲位類型（如：冷藏、危險品、高架、平倉）
  - `priority` - 揀貨順序（數字越小優先級越高，用於自動分配儲位）


## 123