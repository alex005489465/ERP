## ç›®æ¨™
- è²¨ç‰©çš„ç®¡ç† : å“é …ã€åº«å­˜ã€é€²å‡ºæ­·å²

## æ­¥é©Ÿ
- å…ˆå»ºç«‹å°æ‡‰çš„è¡¨

## æ¦‚è¦
### æ ¸å¿ƒ
- ðŸ“¦ å“é …ï¼ˆä»€éº¼è²¨ï¼‰what
- ðŸ“Š åº«å­˜ï¼ˆç¾åœ¨åœ¨å“ªï¼‰where
- ðŸ•“ é€²å‡ºæ­·å²ï¼ˆä½•æ™‚å‹•äº†ï¼‰when
### è¡¨
- items â€” å“é …ä¸»æª”
| æ¬„ä½åç¨±        | èªªæ˜Ž           |
| ----------- | ------------ |
| id          | å•†å“å”¯ä¸€ä»£è™Ÿï¼ˆSKUï¼‰  |
| name        | å•†å“åç¨±         |
| unit        | å–®ä½ï¼ˆå¦‚ï¼šç®±ã€ä»¶ã€kgï¼‰ |
| description | å‚™è¨»èªªæ˜Ž         |
| is\_active  | æ˜¯å¦å•Ÿç”¨         |
- warehouses â€” å€‰åº«åœ°é»žï¼ˆå¯é¸ï¼‰
| æ¬„ä½åç¨±     | èªªæ˜Ž              |
| -------- | --------------- |
| id       | å€‰åº«ä»£è™Ÿï¼ˆä¸»éµï¼‰        |
| name     | å€‰åº«åç¨±            |
| location | å€‰åº«åœ°å€ï¼ˆåœ°ç†ä½ç½®ï¼ŒåŸŽå¸‚æˆ–GPSï¼‰ |
| is_active | æ˜¯å¦å•Ÿç”¨ï¼ˆå¯ç®¡ç†å¤šå€‹å€‰åº«ï¼‰   |
- locations â€” å„²ä½/åº«ä½
| æ¬„ä½åç¨±        | èªªæ˜Ž                    |
| ----------- | --------------------- |
| id          | å„²ä½ä»£è™Ÿï¼ˆä¸»éµï¼Œå¯ç·¨ç¢¼å¦‚ A1-01ï¼‰ |
| warehouse_id | æ‰€å±¬å€‰åº«ï¼ˆå¤–éµï¼‰             |
| zone        | å€åŸŸ/å€æ®µï¼ˆä¾‹å¦‚å†·è—å€ã€æˆå“å€ï¼‰     |
| name        | å„²ä½åç¨±ï¼ˆä¾‹å¦‚ï¼šã€ŒA-01 ä¸Šå±¤ã€ï¼‰   |
| description | å‚™è¨»èªªæ˜Žï¼ˆå¯ç©ºï¼‰             |
| is_active   | æ˜¯å¦å•Ÿç”¨                 |
- stock â€” å³æ™‚åº«å­˜ï¼ˆæ¯å€‹å„²ä½ä¸€ç­†ï¼‰
| æ¬„ä½åç¨±       | èªªæ˜Ž             |
| ---------- | -------------- |
| id         | PKï¼Œè‡ªå‹•éžå¢ž        |
| item_id    | å“é … IDï¼ˆFKï¼‰      |
| location_id | å„²ä½ IDï¼ˆFKï¼‰     |
| quantity   | æ•¸é‡ï¼ˆå…è¨±è² æ•¸è¡¨ç¤ºçŸ­ç¼ºï¼‰   |
| last_updated | æœ€å¾Œæ›´æ–°æ™‚é–“        |
- stock_movements â€” é€²å‡ºç´€éŒ„
| æ¬„ä½åç¨±            | èªªæ˜Ž                |
| --------------- | ----------------- |
| id              | PKï¼Œè‡ªå‹•éžå¢ž           |
| item_id         | å“é … IDï¼ˆFKï¼‰         |
| location_id     | å„²ä½ IDï¼ˆFKï¼‰        |
| type            | é¡žåž‹ï¼ˆINã€OUTã€ADJUSTï¼‰ |
| quantity        | æ•¸é‡ï¼ˆ+/-ï¼‰           |
| reference_type  | ä¾†æºå–®æ“šé¡žåž‹ï¼ˆå¦‚é€²è²¨å–®ã€éŠ·è²¨å–®ï¼‰  |
| reference_id    | ä¾†æºå–®æ“š ID           |

### åŸºæœ¬åŠŸèƒ½
| æ¨¡çµ„   | åŠŸèƒ½èªªæ˜Ž                             |
| ---- | -------------------------------- |
| å•†å“ç®¡ç† | å»ºç«‹/ä¿®æ”¹å•†å“                          |
| åº«å­˜æŸ¥è©¢ | å³æ™‚æŸ¥çœ‹æ¯å€‹å€‰åº«/å•†å“åº«å­˜é‡                   |
| é€²è²¨å…¥åº« | è¼¸å…¥é€²è²¨å–®ï¼Œç”¢ç”Ÿ `stock_movement`        |
| å‡ºè²¨å‡ºåº« | è¼¸å…¥éŠ·è²¨å–®ï¼Œç”¢ç”Ÿ `stock_movement`        |
| åº«å­˜èª¿æ•´ | ä¿®æ­£åº«å­˜éŒ¯èª¤ï¼Œèª¿æ•´ç´€éŒ„ä¹Ÿæœƒå¯«å…¥ `stock_movement` |
| æ­·å²æŸ¥è©¢ | å•†å“çš„é€²å‡ºæ­·å²è¿½è¹¤ã€æŸæ®µæœŸé–“å…§å ±è¡¨                |
### æµç¨‹
```lua
+------------+      +----------------+      +---------------+
| é€²è²¨å–®å»ºç«‹ | ---> | é€²è²¨å…¥åº«è™•ç†  | ---> | stock å¢žåŠ     |
+------------+      +----------------+      +---------------+
                         |
                         v
                +-----------------+
                | stock_movement  | <--- å‡ºè²¨å‡ºåº« / èª¿æ•´æ“ä½œä¹Ÿå¯«å…¥
                +-----------------+
```

## æ€è€ƒ
- å„²ä½ä¹‹é–“èª¿æ’¥ç´€éŒ„ï¼ˆlocation_transfersï¼Œä¾‹å¦‚ç§»ä½ã€æ•´ç†åº«å­˜ï¼‰ï¼Œä¹‹å¾Œå†èªª
- å¯åœ¨ locations è¡¨åŠ ä¸Šï¼š
  - `max_capacity` - æœ€å¤§å®¹ç´é‡ï¼ˆé«”ç©ã€é‡é‡æˆ–ä»¶æ•¸ä¸Šé™ï¼‰
  - `current_capacity` - å³æ™‚ä½”ç”¨é‡ï¼ˆç•¶å‰å·²ä½¿ç”¨çš„å®¹é‡ï¼‰
  - `type` - å„²ä½é¡žåž‹ï¼ˆå¦‚ï¼šå†·è—ã€å±éšªå“ã€é«˜æž¶ã€å¹³å€‰ï¼‰
  - `priority` - æ€è²¨é †åºï¼ˆæ•¸å­—è¶Šå°å„ªå…ˆç´šè¶Šé«˜ï¼Œç”¨æ–¼è‡ªå‹•åˆ†é…å„²ä½ï¼‰


## 123